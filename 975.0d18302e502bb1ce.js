"use strict";(self.webpackChunkwasta=self.webpackChunkwasta||[]).push([[975],{1975:(S,f,a)=>{a.r(f),a.d(f,{ConfirmEmailComponent:()=>N});var e=a(4946),l=a(95),d=a(6814);function h(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"input",3,4),e.NdJ("paste",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.handlePaste(o))})("keyup",function(o){const c=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.onKeyUp(o,c))})("input",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onInput(o))})("keydown",function(o){const c=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.onKeyDown(o,c))}),e.qZA()}if(2&i){const t=s.$implicit,n=s.index,o=e.oxw(2);e.Gre("otp-input ",o.config.inputClass,""),e.Q6J("pattern",o.config.allowNumbersOnly?"\\d*":"")("type",o.inputType)("placeholder",(null==o.config?null:o.config.placeholder)||"")("ngStyle",o.config.inputStyles)("formControl",o.otpForm.controls[t])("id",o.getBoxId(n))}}function C(i,s){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,h,2,9,"input",2),e.ALo(2,"keys"),e.qZA()),2&i){const t=e.oxw();e.Gre("ng-otp-input-wrapper wrapper ",t.config.containerClass,""),e.MGl("id","c_",t.componentKey,""),e.Q6J("ngStyle",t.config.containerStyles),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,6,null==t.otpForm?null:t.otpForm.controls))}}class p{static ifTab(s){return this.ifKey(s,"Tab")}static ifDelete(s){return this.ifKey(s,"Delete;Del")}static ifBackspace(s){return this.ifKey(s,"Backspace")}static ifRightArrow(s){return this.ifKey(s,"ArrowRight;Right")}static ifLeftArrow(s){return this.ifKey(s,"ArrowLeft;Left")}static ifSpacebar(s){return this.ifKey(s,"Spacebar; ")}static ifKey(s,t){return t.split(";").some(o=>o===s.key)}}let g=(()=>{class i{transform(t){return Object.keys(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"keys",type:i,pure:!0}),i})(),y=(()=>{class i{constructor(t,n){this.keysPipe=t,this.document=n,this.config={length:4},this.onInputChange=new e.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new l.cw({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new l.NI);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(n=>{var o=this.otpForm.controls[n].value;o&&o.length>1&&(o.length>=this.config.length?this.setValue(o):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const t=this.document.getElementById(`c_${this.componentKey}`);if(t){const n=t.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,n){const o=this.getBoxId(n-1),r=this.getBoxId(n);return p.ifSpacebar(t)?(t.preventDefault(),!1):p.ifBackspace(t)?(t.target.value?this.clearInput(r,n):(this.clearInput(o,n-1),this.setSelected(o)),void this.rebuildValue()):void 0}onInput(t){if(this.config.allowNumbersOnly&&!this.validateNumber(this.currentVal?`${this.currentVal}${t.target.value}`:t.target.value))return t.target.value="",t.stopPropagation(),void t.preventDefault()}onKeyUp(t,n){p.ifTab(t)&&(n-=1);const o=this.getBoxId(n+1),r=this.getBoxId(n-1),c=this.getBoxId(n);return p.ifRightArrow(t)?(t.preventDefault(),void this.setSelected(o)):p.ifLeftArrow(t)?(t.preventDefault(),void this.setSelected(r)):p.ifDelete(t)?(t.target.value?this.clearInput(c,n):(this.clearInput(r,n-1),this.setSelected(r)),void this.rebuildValue()):void(t.target.value&&(this.ifValidKeyCode(t)&&this.setSelected(o),this.rebuildValue()))}validateNumber(t){return t&&/^[0-9]+$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,n){let o=this.getControlName(n);this.otpForm.controls[o]?.setValue(null);const r=this.document.getElementById(t);r&&r instanceof HTMLInputElement&&(r.value=null)}setSelected(t){this.focusTo(t);const n=this.document.getElementById(t);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(t){const n=t.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(n)}focusTo(t){const n=this.document.getElementById(t);n&&n.focus()}setValue(t){if(!this.config.allowNumbersOnly||!isNaN(t)){if(this.otpForm.reset(),!t)return void this.rebuildValue();if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((o,r)=>{this.otpForm.get(this.getControlName(r))&&this.otpForm.get(this.getControlName(r)).setValue(o)}),!this.config.disableAutoFocus){const o=this.document.getElementById(`c_${this.componentKey}`);var n=t.length<this.config.length?t.length:this.config.length-1;let r=o.getElementsByClassName("otp-input")[n];r&&r.focus&&r.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(n=>{if(this.otpForm.controls[n].value){let o=this.otpForm.controls[n].value,r=o.length>1,c=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());o=o[0];let u=c?"upper"==this.config.letterCase.toLocaleLowerCase()?o.toUpperCase():o.toLowerCase():o;c&&u==o?c=!1:o=u,t+=o,(r||c)&&this.otpForm.controls[n].setValue(o)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.emit(t),this.currentVal=t}handlePaste(t){let n=t.clipboardData||window.clipboardData;if(n)var o=n.getData("Text");t.stopPropagation(),t.preventDefault(),o&&(!this.config.allowNumbersOnly||this.validateNumber(o))&&this.setValue(o)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g),e.Y36(d.K0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(t,n){1&t&&e.YNc(0,C,3,8,"div",0),2&t&&e.Q6J("ngIf",null==n.otpForm?null:n.otpForm.controls)},dependencies:[d.O5,d.PC,d.sg,l.Fj,l.c5,l.JJ,l.oH,g],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),i})(),_=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[g],imports:[[d.ez,l.u5,l.UX]]}),i})(),b=(()=>{class i{set config(t){this.defaultConfig={...this.defaultConfig,...t},this.startCount()}set restart(t){this.timer=this.defaultConfig.timeOut,this.startCount()}constructor(t){this.el=t,this.defaultConfig={timeOut:"01:30",enapleBinding:!0},this.timerCount=new e.vpe,this.onTimeEnd=new e.vpe}startCount(){clearInterval(this.Interval);const t=this.defaultConfig.timeOut.split(":");let n=new Date;n.setMinutes(Number(t[0])),n.setSeconds(Number(t[1])),this.Interval=setInterval(()=>{this.count(n)},1e3)}count(t){if("00:00"==this.timer)return this.onTimeEnd.emit(!0);this.decrement(t),this.BindinigChanges()}decrement(t){t.setSeconds(t.getSeconds()-1),this.timer=t.toLocaleTimeString("en",{minute:"2-digit",second:"2-digit"})}BindinigChanges(){this.defaultConfig.enapleBinding&&(this.el.nativeElement.innerHTML=this.timer)}static#t=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.SBq))};static#e=this.\u0275dir=e.lG2({type:i,selectors:[["","ngTimer",""]],inputs:{config:"config",restart:"restart"},outputs:{timerCount:"timerCount",onTimeEnd:"onTimeEnd"},standalone:!0})}return i})();var m=a(9969),w=a(5235),x=a(9715),v=a(9351),O=a(8247),M=a(1949);const P=function(){return{onRequest:!0}},I=function(){return{length:4,inputClass:"otp-field-style"}},T=function(){return{timeOut:"01:30"}};let N=(()=>{class i{constructor(t,n){this.authController=t,this.route=n,this.restartTimer=!1,this.enableResent=!1,this.type=m.V.get("otpType"),this.verificationCode=new l.NI("",[l.kI.required,l.kI.minLength(4)]),this.email=this.route.snapshot.paramMap.get("email"),this.verificationCode.valueChanges.subscribe(o=>this.confirmCode()),console.log(m.V)}confirmCode(){this.verificationCode.invalid||("email"==this.type?this.authController.confirmEmail({email:this.email,verification_code:this.verificationCode.value}):this.authController.confirmPasswordCode({email:this.email,verification_code:this.verificationCode.value}))}resendCode(){this.enableResent&&("email"==this.type?this.authController.resendCode({email:this.email}).subscribe():this.authController.forgetPassword({email:this.email}),this.onResendBehavior())}onResendBehavior(){this.restartTimer=!this.restartTimer,this.enableResent=!1}static#t=this.\u0275fac=function(n){return new(n||i)(e.Y36(x.Q),e.Y36(v.gz))};static#e=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirm-email"]],standalone:!0,features:[e.jDz],decls:14,vars:12,consts:[["dotLoader","","bindinglayoutModes","",3,"config"],[1,"text-center","mb-3","page-header"],[1,"form-group","my-4"],[1,"form-group","text-center"],[3,"formCtrl","config"],[1,"form-group"],[1,"form-group","text-center",2,"cursor","pointer"],[3,"click"],["ngTimer","",3,"restart","config","onTimeEnd"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",3),e._UZ(7,"ng-otp-input",4),e.qZA(),e._UZ(8,"div",5),e.TgZ(9,"div",6)(10,"a",7),e.NdJ("click",function(){return o.resendCode()}),e._uU(11,"Send a new email to confirm the mail. "),e.qZA(),e.TgZ(12,"a",8),e.NdJ("onTimeEnd",function(){return o.enableResent=!0}),e._uU(13,"01:30"),e.qZA()()()),2&n&&(e.Q6J("config",e.DdM(9,P)),e.xp6(2),e.hij(" ","email"==o.type?"Confirm your email address":"Reset Password Confirm Code",""),e.xp6(3),e.hij("To your email address ",o.email," an email with a verification code has been sent. Enter the received code in the field below and click continue"),e.xp6(2),e.Q6J("formCtrl",o.verificationCode)("config",e.DdM(10,I)),e.xp6(3),e.ekj("active-resend",o.enableResent),e.xp6(2),e.Q6J("restart",o.restartTimer)("config",e.DdM(11,T)))},dependencies:[w.b,O.f,M.O,_,y,b],styles:['.focus-shadow[_ngcontent-%COMP%]:focus{box-shadow:0 0 5px rgba(var(--primary),.5)}.wasta-form-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:.4em}.wasta-form-group[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{height:1em}.wasta-form-group[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{width:100%;color:red;font-size:.7em}.wasta-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:DM Sans;font-size:1em;font-weight:400;color:rgba(var(--text-secondary, 1));display:inline-block;width:100%}.wasta-form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.9em .6em;width:100%}.wasta-form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:rgba(var(--text-secondary, 1));font-size:1.1em}.wasta-form-control[_ngcontent-%COMP%]{border:none;background-color:#fff;padding:10px 5px;border:1px solid rgba(var(--border-color));border-radius:5px;transition:all .3s}.wasta-form-control[_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(var(--primary))}.wasta-form-select[_ngcontent-%COMP%]{border:none;background-color:#fff;padding:10px 5px;border:1px solid rgba(var(--border-color));overflow-y:hidden;border-radius:5px}.wasta-form-select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(var(--primary))}.wasta-form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{height:100px;color:#333}.form-group-ratio[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.form-group-ratio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0;width:0;display:none}.form-group-ratio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:inline-block;border:1px solid rgba(var(--border-color));padding:12px 16px;border-radius:10px;cursor:pointer}.form-group-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:5px}.form-group-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20px;height:20px;padding:5px;border:1px solid rgba(var(--border-color));accent-color:rgb(var(--primary))}.form-group-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{border-radius:10px;cursor:pointer}section[_ngcontent-%COMP%]{width:450px;font-size:var(--auth-font);margin:1em auto;background-color:#fff;padding:32px 24px;box-shadow:0 4px 16px #00000014;border-radius:16px}section.mobile-mode[_ngcontent-%COMP%]{max-width:95%;--auth-font: 16px;border-radius:5px}[_nghost-%COMP%]{--auth-font: 18px}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{font-family:DM Sans;font-weight:400}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em}.page-header[_ngcontent-%COMP%]{font-feature-settings:"clig" off,"liga" off;font-family:DM Sans;font-size:25px;font-style:normal;font-weight:500}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;font-weight:400;color:rgba(var(--text-secondary, 1));display:inline-block;width:100%;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.password[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:flex-end}.password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .password[_ngcontent-%COMP%]   ng-button[_ngcontent-%COMP%]{position:absolute;margin:5px}.error[_ngcontent-%COMP%]{width:100%;color:red;padding:.2em .3em;font-size:calc(var(--auth-font) * .7)}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;text-align:center}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;color:rgba(var(--text),1);cursor:not-allowed}section[_ngcontent-%COMP%]   a.active-resend[_ngcontent-%COMP%]{cursor:pointer;color:rgba(var(--primary),1)}[_nghost-%COMP%]     .otp-field-style{color:rgba(var(--text-secondary, 1))}[_nghost-%COMP%]     .otp-field-style:focus-visible{outline:none;border-color:rgba(var(--primary),1)}']})}return i})()}}]);